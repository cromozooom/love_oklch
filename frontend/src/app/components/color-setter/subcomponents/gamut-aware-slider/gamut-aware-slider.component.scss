:host {
  width: 100%;
  padding-left: 1rem;
  padding-right: 1rem;
  display: block;
}
.slider-group {
  margin-bottom: 1rem;
  // * {
  //   outline: 1px solid red;
  // }
}

// Range container with canvas background
.range-container {
  position: relative;
  box-sizing: border-box;
  height: 40px;
  border: 1px solid #e5e7eb;
}

// Canvas for gradient rendering (behind the input)
.gradient-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

// Native range input (extends beyond container for thumb positioning)
.range-input {
  position: absolute;
  top: -1px;
  left: -13px; // Extend left for 27px thumb (13.5px on each side)
  z-index: 2;
  width: calc(100% + 26px); // Extend 13px on each side
  height: calc(100% + 2px);
  appearance: none;
  cursor: pointer;
  background: transparent;

  // Remove default track styling
  &::-webkit-slider-track {
    background: transparent;
    border: none;
  }

  &::-moz-range-track {
    background: transparent;
    border: none;
  }

  // Thumb styling (diamond shape inspired by oklch-picker)
  &::-webkit-slider-thumb {
    appearance: none;
    box-sizing: border-box;
    width: 27px;
    height: 27px;
    cursor: grab;
    background: linear-gradient(#8f8f8f, #8f8f8f),
      repeating-conic-gradient(from 45deg, #f0f0f0 0% 25%, white 0% 50%) 50% /
        5.5px 5.5px;
    border: 4px solid oklch(1 0 0);
    border-radius: 1px;
    transform: rotate(45deg) translate(14px, 14px);
    transition: transform 0.1s ease;

    &:hover {
      transform: rotate(45deg) translate(14px, 14px);
    }

    &:active {
      cursor: grabbing;
      transform: rotate(45deg) translate(14px, 14px);
    }
  }

  &::-moz-range-thumb {
    box-sizing: border-box;
    width: 27px;
    height: 27px;
    cursor: grab;
    background: linear-gradient(white, white),
      repeating-conic-gradient(from 45deg, #f0f0f0 0% 25%, white 0% 50%) 50% /
        5.5px 5.5px;
    border: 4px solid oklch(1 0 0);
    border-radius: 1px;
    box-shadow: 0 1px 6px 0 oklch(0.2 0.03 310 / 12%),
      0 0 1px 0.5px oklch(0.2 0.03 310 / 12%);
    transform: rotate(45deg) translate(14px, 14px);
    transition: transform 0.1s ease;

    &:hover {
      transform: rotate(45deg) translate(14px, 14px);
    }

    &:active {
      cursor: grabbing;
      transform: rotate(45deg) translate(14px, 14px);
    }
  }
}

// Dark mode
:host-context(.dark) {
  .range-container {
    border-color: #4b5563;
  }

  .range-input::-webkit-slider-thumb {
    background: linear-gradient(#1f2937, #1f2937),
      repeating-conic-gradient(from 45deg, #374151 0% 25%, #1f2937 0% 50%) 50% /
        5.5px 5.5px;
    border-color: oklch(0.95 0 0);
  }

  .range-input::-moz-range-thumb {
    background: linear-gradient(#1f2937, #1f2937),
      repeating-conic-gradient(from 45deg, #374151 0% 25%, #1f2937 0% 50%) 50% /
        5.5px 5.5px;
    border-color: oklch(0.95 0 0);
  }
}
