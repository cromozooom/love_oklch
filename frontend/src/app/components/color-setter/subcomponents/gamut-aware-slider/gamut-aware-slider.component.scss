:host {
  width: 100%;
  padding-left: 1rem;
  padding-right: 1rem;
  display: block;
  --thumbSize: 10px;
  --sliderHeight: 20px;
  --borderSize: 1px;
  // * {
  //   outline: 1px solid red;
  // }
}
.slider-group {
  margin-bottom: 1rem;
  // * {
  //   outline: 1px solid red;
  // }
}

// Range container with canvas background
.range-container {
  position: relative;
  box-sizing: border-box;
  height: calc(var(--thumbSize) * 2);
  border: var(--borderSize) solid #e5e7eb;
}

// Canvas for gradient rendering (behind the input)
.gradient-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

// Native range input (extends beyond container for thumb positioning)
.range-input {
  position: absolute;
  // top: calc(var(--thumbSize) / 2 + (var(--borderSize) * -4));
  top: 0;

  left: calc(
    (var(--thumbSize) / -2)
  ); // Extend left for var(--thumbSize) thumb (13.5px on each side)
  right: calc(
    (var(--thumbSize) / -2)
  ); // Extend left for var(--thumbSize) thumb (13.5px on each side)
  z-index: 2;
  width: calc(100% + calc(var(--thumbSize) - 1px));
  height: calc(calc(var(--thumbSize) * 2));
  appearance: none;
  cursor: pointer;
  background: transparent;

  // Remove default track styling
  &::-webkit-slider-track {
    background: transparent;
    border: none;
  }

  &::-moz-range-track {
    background: transparent;
    border: none;
  }

  // Thumb styling (diamond shape inspired by oklch-picker)
  &::-webkit-slider-thumb {
    appearance: none;
    box-sizing: border-box;
    width: var(--thumbSize);
    height: var(--thumbSize);
    cursor: grab;
    background-color: var(--color);
    background: linear-gradient(var(--color), var(--color)),
      repeating-conic-gradient(
          from 45deg,
          var(--ink-color) 0% 25%,
          var(--ink-color) 0% 50%
        )
        50% / var(--thumbSize) var(--thumbSize);
    // border: 4px solid oklch(1 0 0);
    outline: 1px solid var(--ink-color);
    outline-offset: 2px;
    // border-radius: 1px;
    transform: rotate(45deg)
      translate(calc(var(--thumbSize) / 2), calc(var(--thumbSize) / 2));

    &:hover {
      transform: rotate(45deg)
        translate(calc(var(--thumbSize) / 2), calc(var(--thumbSize) / 2));
    }

    &:active {
      cursor: grabbing;
      transform: rotate(45deg)
        translate(calc(var(--thumbSize) / 2), calc(var(--thumbSize) / 2));
    }
  }

  &::-moz-range-thumb {
    box-sizing: border-box;
    width: var(--thumbSize);
    height: var(--thumbSize);
    cursor: grab;
    background: linear-gradient(white, white),
      repeating-conic-gradient(from 45deg, #f0f0f0 0% 25%, white 0% 50%) 50% /
        5.5px 5.5px;
    border: 4px solid oklch(1 0 0);
    transform: rotate(45deg)
      translate(calc(var(--thumbSize) / 2), calc(var(--thumbSize) / 2));
    transition: transform 0.1s ease;

    &:hover {
      transform: rotate(45deg)
        translate(calc(var(--thumbSize) / 2), calc(var(--thumbSize) / 2));
    }

    &:active {
      cursor: grabbing;
      transform: rotate(45deg)
        translate(calc(var(--thumbSize) / 2), calc(var(--thumbSize) / 2));
    }
  }
}

// Dark mode
:host-context(.dark) {
  .range-container {
    border-color: #4b5563;
  }

  .range-input::-webkit-slider-thumb {
    background: linear-gradient(#1f2937, #1f2937),
      repeating-conic-gradient(from 45deg, #374151 0% 25%, #1f2937 0% 50%) 50% /
        5.5px 5.5px;
    border-color: oklch(0.95 0 0);
  }

  .range-input::-moz-range-thumb {
    background: linear-gradient(#1f2937, #1f2937),
      repeating-conic-gradient(from 45deg, #374151 0% 25%, #1f2937 0% 50%) 50% /
        5.5px 5.5px;
    border-color: oklch(0.95 0 0);
  }
}
