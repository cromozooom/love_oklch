<div *ngIf="analysis" class="wcag-panel">
  <div class="wcag-header">
    <h3 class="text-lg font-semibold text-gray-800">WCAG Compliance</h3>
  </div>

  <!-- White Background -->
  <div class="wcag-section">
    <div class="background-label">White Background (#FFFFFF)</div>
    <div class="contrast-ratio">
      <span class="label">Contrast:</span>
      <span class="ratio">{{
        formatRatio(analysis.whiteBackground.ratio)
      }}</span>
    </div>

    <!-- Contrast Ratio Visual Bar -->
    <div class="contrast-bar-container">
      <div
        class="contrast-bar"
        [style.width.%]="getContrastBarWidth(analysis.whiteBackground.ratio)"
        [style.backgroundColor]="
          getContrastBarColor(analysis.whiteBackground.ratio)
        "
      ></div>
    </div>
    <div class="bar-scale">
      <span>1:1</span>
      <span>4.5:1</span>
      <span>7:1</span>
      <span>21:1</span>
    </div>

    <div class="compliance-grid">
      <!-- Normal AA -->
      <div class="compliance-item">
        <div class="threshold-label">Normal AA</div>
        <div class="threshold-value">4.5:1</div>
        <div
          [class]="
            'status ' +
            getComplianceClass(analysis.whiteBackground.normalTextAA)
          "
        >
          {{ getStatusLabel(analysis.whiteBackground.normalTextAA) }}
        </div>
      </div>

      <!-- Normal AAA -->
      <div class="compliance-item">
        <div class="threshold-label">Normal AAA</div>
        <div class="threshold-value">7:1</div>
        <div
          [class]="
            'status ' +
            getComplianceClass(analysis.whiteBackground.normalTextAAA)
          "
        >
          {{ getStatusLabel(analysis.whiteBackground.normalTextAAA) }}
        </div>
      </div>

      <!-- Large AA -->
      <div class="compliance-item">
        <div class="threshold-label">Large AA</div>
        <div class="threshold-value">3:1</div>
        <div
          [class]="
            'status ' + getComplianceClass(analysis.whiteBackground.largeTextAA)
          "
        >
          {{ getStatusLabel(analysis.whiteBackground.largeTextAA) }}
        </div>
      </div>

      <!-- Large AAA -->
      <div class="compliance-item">
        <div class="threshold-label">Large AAA</div>
        <div class="threshold-value">4.5:1</div>
        <div
          [class]="
            'status ' +
            getComplianceClass(analysis.whiteBackground.largeTextAAA)
          "
        >
          {{ getStatusLabel(analysis.whiteBackground.largeTextAAA) }}
        </div>
      </div>

      <!-- Graphical AA -->
      <div class="compliance-item">
        <div class="threshold-label">Graphical AA</div>
        <div class="threshold-value">3:1</div>
        <div
          [class]="
            'status ' + getComplianceClass(analysis.whiteBackground.graphicalAA)
          "
        >
          {{ getStatusLabel(analysis.whiteBackground.graphicalAA) }}
        </div>
      </div>

      <!-- Graphical AAA -->
      <div class="compliance-item">
        <div class="threshold-label">Graphical AAA</div>
        <div class="threshold-value">4.5:1</div>
        <div
          [class]="
            'status ' +
            getComplianceClass(analysis.whiteBackground.graphicalAAA)
          "
        >
          {{ getStatusLabel(analysis.whiteBackground.graphicalAAA) }}
        </div>
      </div>
    </div>
  </div>

  <!-- Black Background -->
  <div class="wcag-section">
    <div class="background-label">Black Background (#000000)</div>
    <div class="contrast-ratio">
      <span class="label">Contrast:</span>
      <span class="ratio">{{
        formatRatio(analysis.blackBackground.ratio)
      }}</span>
    </div>

    <!-- Contrast Ratio Visual Bar -->
    <div class="contrast-bar-container">
      <div
        class="contrast-bar"
        [style.width.%]="getContrastBarWidth(analysis.blackBackground.ratio)"
        [style.backgroundColor]="
          getContrastBarColor(analysis.blackBackground.ratio)
        "
      ></div>
    </div>
    <div class="bar-scale">
      <span>1:1</span>
      <span>4.5:1</span>
      <span>7:1</span>
      <span>21:1</span>
    </div>

    <div class="compliance-grid">
      <!-- Normal AA -->
      <div class="compliance-item">
        <div class="threshold-label">Normal AA</div>
        <div class="threshold-value">4.5:1</div>
        <div
          [class]="
            'status ' +
            getComplianceClass(analysis.blackBackground.normalTextAA)
          "
        >
          {{ getStatusLabel(analysis.blackBackground.normalTextAA) }}
        </div>
      </div>

      <!-- Normal AAA -->
      <div class="compliance-item">
        <div class="threshold-label">Normal AAA</div>
        <div class="threshold-value">7:1</div>
        <div
          [class]="
            'status ' +
            getComplianceClass(analysis.blackBackground.normalTextAAA)
          "
        >
          {{ getStatusLabel(analysis.blackBackground.normalTextAAA) }}
        </div>
      </div>

      <!-- Large AA -->
      <div class="compliance-item">
        <div class="threshold-label">Large AA</div>
        <div class="threshold-value">3:1</div>
        <div
          [class]="
            'status ' + getComplianceClass(analysis.blackBackground.largeTextAA)
          "
        >
          {{ getStatusLabel(analysis.blackBackground.largeTextAA) }}
        </div>
      </div>

      <!-- Large AAA -->
      <div class="compliance-item">
        <div class="threshold-label">Large AAA</div>
        <div class="threshold-value">4.5:1</div>
        <div
          [class]="
            'status ' +
            getComplianceClass(analysis.blackBackground.largeTextAAA)
          "
        >
          {{ getStatusLabel(analysis.blackBackground.largeTextAAA) }}
        </div>
      </div>

      <!-- Graphical AA -->
      <div class="compliance-item">
        <div class="threshold-label">Graphical AA</div>
        <div class="threshold-value">3:1</div>
        <div
          [class]="
            'status ' + getComplianceClass(analysis.blackBackground.graphicalAA)
          "
        >
          {{ getStatusLabel(analysis.blackBackground.graphicalAA) }}
        </div>
      </div>

      <!-- Graphical AAA -->
      <div class="compliance-item">
        <div class="threshold-label">Graphical AAA</div>
        <div class="threshold-value">4.5:1</div>
        <div
          [class]="
            'status ' +
            getComplianceClass(analysis.blackBackground.graphicalAAA)
          "
        >
          {{ getStatusLabel(analysis.blackBackground.graphicalAAA) }}
        </div>
      </div>
    </div>
  </div>
</div>
